<!DOCTYPE html>
<html>
    <head>
        <title>집에가고싶다.</title>
    </head>
    <body>
        <!-- <input type="text" id="argument" /> -->
        <button id="start" disabled onclick="run()">시작!</button>
        <script src="wasm_exec.js"></script>
        <script>
            const $argument = document.getElementById("argument");
            const $start = document.getElementById("start");
            const go = new Go();
            let module;
            let instance;

            WebAssembly.instantiateStreaming(fetch("/play.wasm"), go.importObject).then(result => {
                module = result.module;
                instance = result.instance;
                $start.disabled = false;
            });
            async function run(){
                await go.run(instance);
                instance = await WebAssembly.instantiate(module, go.importObject);
            }
        </script>
    </body>
</html>